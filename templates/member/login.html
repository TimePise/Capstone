{% extends "member/base.html" %}
{% load static %}
{% block title %}로그인{% endblock %}
{% block content %}
<div class="auth-wrapper">
  <div class="auth-card">
    <div>
      <p class="auth-card__subtitle">안전한 병동 케어 파트너</p>
      <h1 class="auth-card__title">낙상감지시스템 로그인</h1>
    </div>

    {% if signup_success %}
    <div class="alert alert-success">회원가입이 완료되었습니다. 로그인해 주세요.</div>
    {% endif %}
    {% if message %}
    <div class="alert alert-error">{{ message }}</div>
    {% endif %}

    <form method="POST" action="{% url 'member_login' %}" class="auth-form">
      {% csrf_token %}
      <div class="input-field">
        <label for="member_id">아이디</label>
        <input
          type="text"
          id="member_id"
          name="member_id"
          class="input-control"
          placeholder="ex) wardA101"
          required
        />
      </div>
      <div class="input-field">
        <label for="password">비밀번호</label>
        <div class="input-password">
          <input
            type="password"
            id="password"
            name="passwd"
            class="input-control"
            placeholder="비밀번호"
            required
          />
          <button type="button" id="togglePassword">보기</button>
        </div>
      </div>
      <button type="submit" class="btn btn-primary btn-block">로그인</button>
    </form>

    <div class="auth-links">
      <a href="{% url 'find_id' %}">아이디 찾기</a>
      <a href="{% url 'find_password' %}">비밀번호 찾기</a>
      <a href="{% url 'member_reg' %}">회원가입</a>
    </div>
  </div>
</div>

<script>
  const toggleBtn = document.getElementById("togglePassword");
  const pwInput = document.getElementById("password");

  toggleBtn.addEventListener("click", () => {
    const isPassword = pwInput.type === "password";
    pwInput.type = isPassword ? "text" : "password";
    toggleBtn.textContent = isPassword ? "숨기기" : "보기";
  });

  document.getElementById("member_id").focus();
</script>
{% endblock %}
